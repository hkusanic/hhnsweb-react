{"version":3,"sources":["pages/Videos/list/index.js"],"names":["VideoList","connect","_ref","video","state","language","currentPage","perPage","showing100Characters","sentence","result","resultArray","split","length","slice","concat","join","handleLanguage","_this","setState","handlePageChnage","page","dispatch","props","type","deleteVideo","uuid","onChangeDate","date","format","onChangeDateSort","order","createdDateSort","hanldeRedirect","record","history","_this$state","push","pathname","_this2","this","_this$props","location","undefined","paginationCurrentPage","nextProps","isDeleted","_this3","videos","totalVideos","_this$state2","data","columns","title","dataIndex","key","render","renderHTML","substring","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","Date","toDateString","react_router_dom__WEBPACK_IMPORTED_MODULE_13__","to","className","onClick","paginationConfig","current","pageSize","total","onChange","react_helmet__WEBPACK_IMPORTED_MODULE_10__","style","paddingBottom","antd_es_switch__WEBPACK_IMPORTED_MODULE_3__","defaultChecked","checkedChildren","unCheckedChildren","width","marginLeft","antd_es_table__WEBPACK_IMPORTED_MODULE_1__","rowKey","_id","rowClassName","translation_required","onRow","onDoubleClick","scroll","x","dataSource","pagination","React","Component"],"mappings":"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","file":"static/js/26.ba5046a6.chunk.js","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable react/destructuring-assignment */\nimport React from 'react'\nimport { Table, Switch } from 'antd'\nimport { Helmet } from 'react-helmet'\nimport { connect } from 'react-redux'\nimport renderHTML from 'react-render-html'\nimport { Link } from 'react-router-dom'\n\nimport './index.css'\n\n@connect(({ video }) => ({ video }))\nclass VideoList extends React.Component {\n  state = {\n    language: true,\n    currentPage: 1,\n    perPage: 20,\n  }\n\n  componentDidMount() {\n    const { dispatch, location } = this.props\n    const { state } = location\n    if (state !== undefined) {\n      if (state.paginationCurrentPage) {\n        this.setState(\n          {\n            currentPage: state.paginationCurrentPage,\n          },\n          () => {\n            dispatch({\n              type: 'video/GET_VIDEOS',\n              page: this.state.currentPage,\n            })\n          },\n        )\n      } else {\n        dispatch({\n          type: 'video/GET_VIDEOS',\n          page: this.state.currentPage,\n        })\n      }\n    } else {\n      dispatch({\n        type: 'video/GET_VIDEOS',\n        page: this.state.currentPage,\n      })\n    }\n\n    dispatch({\n      type: 'kirtan/RESET_STORE',\n    })\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { dispatch } = this.props\n    if (nextProps.video.isDeleted) {\n      dispatch({\n        type: 'video/GET_VIDEOS',\n        page: 1,\n      })\n    }\n    // this.setState({\n    //   language: window.localStorage['app.settings.locale'] === '\"en-US\"',\n    // })\n  }\n\n  showing100Characters = sentence => {\n    let result = sentence\n    let resultArray = result.split(' ')\n    if (resultArray.length > 10) {\n      resultArray = resultArray.slice(0, 10)\n      result = `${resultArray.join(' ')}...`\n    }\n    return result\n  }\n\n  handleLanguage = () => {\n    const { language } = this.state\n    this.setState({\n      language: !language,\n    })\n  }\n\n  handlePageChnage = page => {\n    const { dispatch } = this.props\n\n    this.setState(\n      {\n        currentPage: page,\n      },\n      () => {\n        dispatch({\n          type: 'video/GET_VIDEOS',\n          page: this.state.currentPage,\n        })\n      },\n    )\n  }\n\n  deleteVideo = uuid => {\n    const { dispatch } = this.props\n    dispatch({\n      type: 'video/DELETE_VIDEOS',\n      uuid,\n    })\n  }\n\n  onChangeDate = date => {\n    const { dispatch } = this.props\n    dispatch({\n      type: 'video/GET_VIDEOS',\n      page: 1,\n      date: date ? date.format('YYYY-MM-DD') : null,\n    })\n  }\n\n  onChangeDateSort = order => {\n    const { dispatch } = this.props\n    dispatch({\n      type: 'video/GET_VIDEOS',\n      page: 1,\n      createdDateSort: order,\n    })\n  }\n\n  hanldeRedirect = record => {\n    const { history } = this.props\n    const { language, currentPage } = this.state\n    history.push({\n      pathname: '/video/create',\n      state: { uuid: record.uuid, language, currentPage },\n    })\n  }\n\n  render() {\n    const { video } = this.props\n    const { videos, totalVideos } = video\n    const { language, currentPage, perPage } = this.state\n    const data = videos\n    const columns = [\n      {\n        title: 'Title',\n        dataIndex: language ? 'en.title' : 'ru.title',\n        key: language ? 'en.title' : 'ru.title',\n        render: title => (title ? renderHTML(title.substring(0, 30)) : ''),\n      },\n      {\n        title: 'Event',\n        dataIndex: language ? 'en.event' : 'ru.event',\n        key: language ? 'en.event' : 'ru.event',\n      },\n      {\n        title: 'Type',\n        dataIndex: 'type',\n        key: 'type',\n      },\n      {\n        title: 'Date',\n        dataIndex: 'video_date',\n        key: 'video_date',\n        render: date => <span>{`${new Date(date).toDateString()}`}</span>,\n      },\n      {\n        title: 'Action',\n        key: 'action',\n        render: record => (\n          <span>\n            <Link\n              to={{\n                pathname: '/video/create',\n                state: { uuid: record.uuid, language, currentPage },\n              }}\n            >\n              <i className=\"fa fa-edit mr-2 editIcon\" />\n            </Link>\n            <i\n              className=\"fa fa-trash mr-2 closeIcon\"\n              onClick={() => {\n                this.deleteVideo(record.uuid)\n              }}\n            />\n          </span>\n        ),\n      },\n    ]\n\n    const paginationConfig = {\n      current: currentPage,\n      pageSize: perPage,\n      total: totalVideos,\n      onChange: this.handlePageChnage,\n    }\n\n    return (\n      <div>\n        <Helmet title=\"Video List\" />\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"utils__title\" style={{ paddingBottom: '10px' }}>\n              <strong>Video List</strong>\n              <Switch\n                defaultChecked\n                checkedChildren={language ? 'en' : 'ru'}\n                unCheckedChildren={language ? 'en' : 'ru'}\n                onChange={this.handleLanguage}\n                className=\"toggle\"\n                style={{ width: '100px', marginLeft: '10px' }}\n              />\n            </div>\n          </div>\n          <div className=\"card-body\">\n            <Table\n              // eslint-disable-next-line no-underscore-dangle\n              rowKey={record => record._id}\n              // eslint-disable-next-line no-unused-expressions\n              rowClassName={record =>\n                record.translation_required === true ? 'NotTranslated' : 'translated'\n              }\n              onRow={record => {\n                return {\n                  onDoubleClick: () => {\n                    this.hanldeRedirect(record)\n                  },\n                }\n              }}\n              className=\"utils__scrollTable customTable\"\n              scroll={{ x: '100%' }}\n              columns={columns}\n              dataSource={data}\n              pagination={paginationConfig}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default VideoList\n"],"sourceRoot":""}