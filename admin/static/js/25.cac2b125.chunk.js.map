{"version":3,"sources":["pages/Kirtan/list/index.js"],"names":["KirtanList","connect","_ref","kirtan","state","language","currentPage","perPage","handlePageChnage","page","dispatch","_this","props","setState","type","deleteKirtan","uuid","handleLanguage","hanldeRedirect","record","history","_this$state","push","pathname","id","_this2","this","_this$props","location","undefined","paginationCurrentPage","nextProps","isDeleted","_this3","_this$state2","kirtans","totalKirtans","data","columns","title","dataIndex","key","render","renderHTML","substring","date","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","concat","Date","toDateString","react_router_dom__WEBPACK_IMPORTED_MODULE_12__","to","className","onClick","paginationConfig","current","pageSize","total","onChange","react_helmet__WEBPACK_IMPORTED_MODULE_10__","antd_es_switch__WEBPACK_IMPORTED_MODULE_3__","defaultChecked","checkedChildren","unCheckedChildren","style","width","marginLeft","antd_es_table__WEBPACK_IMPORTED_MODULE_1__","rowKey","_id","rowClassName","translation_required","onRow","onDoubleClick","scroll","x","dataSource","pagination","React","Component"],"mappings":"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","file":"static/js/25.cac2b125.chunk.js","sourcesContent":["/* eslint-disable react/destructuring-assignment */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React from 'react'\nimport { Table, Switch } from 'antd'\nimport { Helmet } from 'react-helmet'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport renderHTML from 'react-render-html'\n\nimport './index.css'\n\n@connect(({ kirtan }) => ({ kirtan }))\nclass KirtanList extends React.Component {\n  state = {\n    // language: window.localStorage['app.settings.locale'] === '\"en-US\"',\n    language: true,\n    currentPage: 1,\n    perPage: 20,\n  }\n\n  componentDidMount() {\n    const { dispatch, location } = this.props\n    const { state } = location\n\n    if (state !== undefined) {\n      if (state.paginationCurrentPage) {\n        this.setState(\n          {\n            currentPage: state.paginationCurrentPage,\n          },\n          () => {\n            dispatch({\n              type: 'kirtan/GET_KIRTAN',\n              page: this.state.currentPage,\n            })\n          },\n        )\n      } else {\n        dispatch({\n          type: 'kirtan/GET_KIRTAN',\n          page: this.state.currentPage,\n        })\n      }\n    } else {\n      dispatch({\n        type: 'kirtan/GET_KIRTAN',\n        page: this.state.currentPage,\n      })\n    }\n\n    dispatch({\n      type: 'video/RESET_STORE',\n    })\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.kirtan.isDeleted) {\n      const { dispatch } = this.props\n      dispatch({\n        type: 'kirtan/GET_KIRTAN',\n        page: 1,\n      })\n    }\n    // this.setState({\n    //   language: window.localStorage['app.settings.locale'] === '\"en-US\"',\n    // })\n  }\n\n  handlePageChnage = page => {\n    const { dispatch } = this.props\n\n    this.setState(\n      {\n        currentPage: page,\n      },\n      () => {\n        dispatch({\n          type: 'kirtan/GET_KIRTAN',\n          page: this.state.currentPage,\n        })\n      },\n    )\n  }\n\n  deleteKirtan = uuid => {\n    const { dispatch } = this.props\n    dispatch({\n      type: 'kirtan/DELETE_KIRTAN_BY_ID',\n      uuid,\n    })\n  }\n\n  handleLanguage = () => {\n    const { language } = this.state\n    this.setState({\n      language: !language,\n    })\n  }\n\n  hanldeRedirect = record => {\n    const { history } = this.props\n    const { language, currentPage } = this.state\n    history.push({\n      pathname: '/kirtan/create',\n      state: { id: record.uuid, language, currentPage },\n    })\n  }\n\n  render() {\n    const { kirtan } = this.props\n    const { language, currentPage, perPage } = this.state\n    const { kirtans, totalKirtans } = kirtan\n    const data = kirtans\n\n    const columns = [\n      {\n        title: 'Title',\n        dataIndex: language ? 'en.title' : 'ru.title',\n        key: language ? 'en.title' : 'ru.title',\n        render: title => (title ? renderHTML(title.substring(0, 30)) : ''),\n      },\n      {\n        title: 'Event',\n        dataIndex: language ? 'en.event' : 'ru.event',\n        key: language ? 'en.event' : 'ru.event',\n      },\n      {\n        title: 'Type',\n        dataIndex: 'type',\n        key: 'type',\n      },\n      {\n        title: 'Date',\n        dataIndex: 'kirtan_creation_date',\n        key: 'kirtan_creation_date',\n        render: date => <span>{`${new Date(date).toDateString()}`}</span>,\n      },\n      {\n        title: 'Action',\n        key: 'action',\n        render: record => (\n          <span>\n            <Link\n              to={{ pathname: '/kirtan/create', state: { id: record.uuid, language, currentPage } }}\n            >\n              <i className=\"fa fa-edit mr-2 editIcon\" />\n            </Link>\n            <i\n              className=\"fa fa-trash mr-2 closeIcon\"\n              onClick={() => {\n                this.deleteKirtan(record.uuid)\n              }}\n            />\n          </span>\n        ),\n      },\n    ]\n\n    const paginationConfig = {\n      current: currentPage,\n      pageSize: perPage,\n      total: totalKirtans,\n      onChange: this.handlePageChnage,\n    }\n\n    return (\n      <div>\n        <Helmet title=\"Kirtan List\" />\n        <div className=\"card\">\n          <div className=\"card-header mb-3\">\n            <div className=\"utils__title\">\n              <strong>Kirtan List</strong>\n              <Switch\n                defaultChecked\n                checkedChildren={language ? 'en' : 'ru'}\n                unCheckedChildren={language ? 'en' : 'ru'}\n                onChange={this.handleLanguage}\n                className=\"toggle\"\n                style={{ width: '100px', marginLeft: '10px' }}\n              />\n            </div>\n          </div>\n          <div className=\"card-body\">\n            <Table\n              // eslint-disable-next-line no-underscore-dangle\n              rowKey={record => record._id}\n              // eslint-disable-next-line no-unused-expressions\n              rowClassName={record =>\n                record.translation_required === true ? 'NotTranslated' : 'translated'\n              }\n              onRow={record => {\n                return {\n                  onDoubleClick: () => {\n                    this.hanldeRedirect(record)\n                  },\n                }\n              }}\n              className=\"utils__scrollTable customTable\"\n              scroll={{ x: '100%' }}\n              columns={columns}\n              dataSource={data}\n              pagination={paginationConfig}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default KirtanList\n"],"sourceRoot":""}